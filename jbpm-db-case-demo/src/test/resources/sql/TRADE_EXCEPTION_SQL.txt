DROP TABLE  TRADE_EXCEPTIONS;

CREATE TABLE TRADE_EXCEPTIONS
(
    ID NUMBER(10) NOT NULL,
    ERROR_CODE VARCHAR2(15),
    ERROR_TYPE VARCHAR2(10),
    ERROR_DESC VARCHAR2(100),
    STATUS VARCHAR2(10)
);

SELECT * from TRADE_EXCEPTIONS;

INSERT INTO TRADE_EXCEPTIONS VALUES (1, 'P101', 'PROCESSING', 'Error processing trade 12345', 'PENDING');
INSERT INTO TRADE_EXCEPTIONS VALUES (2, 'V101', 'VALIDATION', 'Validation of parameters for trade 54215 failed', 'PENDING');
INSERT INTO TRADE_EXCEPTIONS VALUES (3, 'R101', 'RUNTIME', 'Null pointer exception when processing trade 4567578', 'PENDING');
INSERT INTO TRADE_EXCEPTIONS VALUES (4, 'P102', 'PROCESSING', 'Trade data for 57854 not matching', 'PENDING');
INSERT INTO TRADE_EXCEPTIONS VALUES (5, 'R102', 'RUNTIME', 'Incorrect trade date for 41579812', 'PENDING');

UPDATE TRADE_EXCEPTIONS SET STATUS = 'PENDING';
UPDATE TRADE_EXCEPTIONS SET STATUS = 'INPROGRESS' WHERE ERROR_TYPE='PROCESSING';
UPDATE TRADE_EXCEPTIONS SET STATUS = 'PENDING' WHERE ERROR_TYPE='VALIDATION';
UPDATE TRADE_EXCEPTIONS SET STATUS = 'PENDING' WHERE STATUS = 'INPROGRESS';

SELECT ID, ERROR_CODE, ERROR_TYPE, ERROR_DESC, STATUS FROM TRADE_EXCEPTIONS WHERE STATUS='PENDING';
SELECT ID, ERROR_CODE, ERROR_TYPE, ERROR_DESC, STATUS FROM TRADE_EXCEPTIONS;
